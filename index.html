<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Industrial Shift Management System - High performance work schedule planner">
    <meta name="theme-color" content="#111111">
    <title>IND_SHIFT_MGR_V2.0 // å·¥ä¸šç­è¡¨ç³»ç»Ÿ</title>
    
    <!-- é¢„è¿æ¥å’Œé¢„åŠ è½½ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- å­—ä½“é¢„åŠ è½½ï¼ˆå…³é”®èµ„æºï¼‰ -->
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=JetBrains+Mono:wght@400;700;800&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    
    <!-- è„šæœ¬é¢„åŠ è½½ -->
    <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js">
    <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

    <style>
        /* ============================================
           1ï¸âƒ£  äº¤äº’æµç•…æ€§ä¼˜åŒ–
           ============================================ */
        
        :root {
            /* è°ƒè‰²æ¿ V2 - æ›´é«˜å¯¹æ¯”åº¦ */
            --bg-paper: #E6E4D8;
            --bg-dark: #111111;
            --ink: #000000;
            
            --blue: #0033CC;   /* DAY */
            --yellow: #FFCC00; /* NIGHT */
            --red: #FF3300;    /* OFF */
            --green: #00CC66;  /* STATS */
            --orange: #FF6600; /* READONLY */
            
            --border-thick: 3px;
            --shadow-hard: 6px;
            
            /* æ–°å¢ï¼šæ€§èƒ½ä¼˜åŒ–å˜é‡ */
            --transition-fast: 0.1s;
            --transition-normal: 0.2s;
            --transition-slow: 0.3s;
            --easing-snappy: cubic-bezier(0.34, 1.56, 0.64, 1);
            --easing-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        * {
            box-sizing: border-box;
            border-radius: 0 !important;
            -webkit-tap-highlight-color: transparent;
            /* æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘é‡æ’ */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-paper);
            color: var(--ink);
            font-family: 'JetBrains Mono', monospace;
            overflow-x: hidden;
            background-image: 
                linear-gradient(var(--bg-paper) 2px, transparent 2px),
                linear-gradient(90deg, var(--bg-paper) 2px, transparent 2px),
                linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
            background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
            /* æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨ will-change */
            will-change: background;
        }

        /* CRT æ‰«æçº¿è¦†ç›–å±‚ - æ€§èƒ½ä¼˜åŒ–ç‰ˆ */
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                rgba(18, 16, 16, 0) 50%,
                rgba(0, 0, 0, 0.03) 50%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 9999;
            /* GPUåŠ é€Ÿ */
            transform: translateZ(0);
        }

        /* å¸ƒå±€å®¹å™¨ */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            min-height: 100vh;
            border-left: var(--border-thick) solid var(--ink);
            border-right: var(--border-thick) solid var(--ink);
            background: var(--bg-paper);
            display: flex;
            flex-direction: column;
            position: relative;
            /* GPUåŠ é€Ÿ */
            transform: translateZ(0);
        }

        /* åªè¯»æ¨¡å¼é®ç½© - æ€§èƒ½ä¼˜åŒ– */
        .readonly-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 102, 0, 0.05);
            pointer-events: none;
            display: none;
            z-index: 1;
            /* ä½¿ç”¨ transform è€Œä¸æ˜¯ display ä»¥æå‡æ€§èƒ½ */
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-normal), visibility var(--transition-normal);
        }

        .readonly-overlay.active {
            display: block;
            opacity: 1;
            visibility: visible;
            border: 5px dashed var(--orange);
            animation: readonlyPulse 2s infinite;
        }

        @keyframes readonlyPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        /* ============================================
           2ï¸âƒ£  è§†è§‰åé¦ˆä¼˜åŒ–
           ============================================ */

        /* Header */
        header {
            border-bottom: var(--border-thick) solid var(--ink);
            padding: 2rem 1rem;
            background: var(--ink);
            color: var(--bg-paper);
            position: relative;
            overflow: hidden;
            /* è§†è§‰åé¦ˆï¼šå¾®å¦™çš„èƒŒæ™¯åŠ¨ç”» */
            background: linear-gradient(
                135deg,
                var(--ink) 0%,
                #1a1a1a 50%,
                var(--ink) 100%
            );
            background-size: 200% 200%;
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
        }

        h1 {
            font-family: 'Archivo Black', sans-serif;
            font-size: clamp(2rem, 6vw, 3.5rem);
            margin: 0;
            line-height: 1;
            text-transform: uppercase;
            letter-spacing: -2px;
            /* æ–‡æœ¬ä¼˜åŒ– */
            text-rendering: optimizeLegibility;
            transition: text-shadow var(--transition-normal);
        }

        h1:hover {
            text-shadow: 2px 2px 4px rgba(255,204,0, 0.3);
        }

        .meta-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.75rem;
            opacity: 0.8;
            border-top: 1px dashed var(--bg-paper);
            padding-top: 10px;
            /* æ— éšœç¢ï¼šæ›´å¥½çš„å¯è¯»æ€§ */
            letter-spacing: 0.5px;
        }

        /* ============================================
           ä»ªè¡¨ç›˜ä¼˜åŒ–
           ============================================ */

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0;
            border-bottom: var(--border-thick) solid var(--ink);
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
        }

        .stat-box {
            padding: 15px;
            border-right: var(--border-thick) solid var(--ink);
            background: #fff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            /* è§†è§‰åé¦ˆï¼šæ‚¬åœæ•ˆæœ */
            transition: all var(--transition-normal);
            cursor: default;
        }

        .stat-box:last-child {
            border-right: none;
        }

        .stat-box:hover {
            background: #f5f5f5;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        .stat-label {
            font-size: 0.7rem;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 5px;
            opacity: 0.6;
            letter-spacing: 1px;
        }

        .stat-value {
            font-family: 'Archivo Black', sans-serif;
            font-size: 2rem;
            line-height: 1;
            /* è®¡æ•°åŠ¨ç”»ä¼˜åŒ– */
            font-variant-numeric: tabular-nums;
            transition: color var(--transition-normal);
        }

        /* ç»Ÿè®¡é¢œè‰² */
        .stat-day .stat-value {
            color: var(--blue);
        }

        .stat-night .stat-value {
            color: #DDAA00;
            text-shadow: 1px 1px 0px #000;
        }

        .stat-off .stat-value {
            color: var(--red);
        }

        /* ============================================
           å·¥å…·æ ä¼˜åŒ–
           ============================================ */

        .tool-deck {
            padding: 20px;
            border-bottom: var(--border-thick) solid var(--ink);
            background: #f4f4f4;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: space-between;
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
        }

        .month-ctrl {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .month-label {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.5rem;
            min-width: 140px;
            text-align: center;
            /* è§†è§‰åé¦ˆï¼šå¹³æ»‘è¿‡æ¸¡ */
            transition: all var(--transition-normal);
        }

        /* ============================================
           å·¥å…·é€‰æ‹©å™¨ä¼˜åŒ–
           ============================================ */

        .tool-selector {
            display: flex;
            gap: 10px;
            background: var(--ink);
            padding: 5px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
            transition: all var(--transition-normal);
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
        }

        .tool-selector.disabled {
            opacity: 0.4;
            filter: grayscale(1);
            pointer-events: none;
        }

        .tool-btn {
            border: 2px solid transparent;
            background: var(--bg-paper);
            color: var(--ink);
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            /* å…³é”®ä¼˜åŒ–ï¼šä½¿ç”¨ transform æå‡æ€§èƒ½ */
            transition: all var(--transition-fast);
            transform: translateZ(0);
            /* è§¦æ‘¸ä¼˜åŒ– */
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }

        .tool-btn:hover {
            background: #fff;
            /* ä½¿ç”¨ transform è€Œä¸æ˜¯ box-shadow ä»¥è·å¾—æ›´å¥½æ€§èƒ½ */
            transform: translateY(-2px) translateZ(0);
        }

        /* æ¿€æ´»çŠ¶æ€ - è§†è§‰åé¦ˆå¼ºåŒ– */
        .tool-btn.active {
            border-color: #fff;
            transform: scale(0.9) translateZ(0);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            animation: toolBtnPulse 0.4s var(--easing-snappy);
        }

        @keyframes toolBtnPulse {
            0% { transform: scale(1) translateZ(0); }
            50% { transform: scale(0.95) translateZ(0); }
            100% { transform: scale(0.9) translateZ(0); }
        }

        .tool-btn[data-tool="day"].active {
            background: var(--blue);
            color: #fff;
        }

        .tool-btn[data-tool="night"].active {
            background: var(--yellow);
            color: #000;
        }

        .tool-btn[data-tool="off"].active {
            background: var(--red);
            color: #fff;
        }

        .tool-btn[data-tool="erase"].active {
            background: #fff;
            text-decoration: line-through;
        }

        /* ============================================
           æŒ‰é’®ä¼˜åŒ–
           ============================================ */

        .btn {
            background: transparent;
            border: 2px solid var(--ink);
            color: var(--ink);
            padding: 8px 16px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.8rem;
            cursor: pointer;
            box-shadow: 3px 3px 0px var(--ink);
            text-transform: uppercase;
            /* å…³é”®ï¼šä½¿ç”¨ transform æ›¿ä»£ box-shadow ä»¥ä¼˜åŒ–æ€§èƒ½ */
            transition: all var(--transition-fast);
            position: relative;
            overflow: hidden;
            /* è§¦æ‘¸ä¼˜åŒ– */
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
            transform: translateZ(0);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255, 0.1);
            opacity: 0;
            transition: opacity var(--transition-fast);
            pointer-events: none;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:hover {
            transform: translate(-1px, -1px) translateZ(0);
            background: #fff;
        }

        .btn:active {
            transform: translate(2px, 2px) translateZ(0);
            box-shadow: 0px 0px 0px var(--ink);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            filter: grayscale(1);
        }

        .btn:disabled:hover {
            transform: translateZ(0);
            background: transparent;
        }

        /* åªè¯»æŒ‰é’® */
        .btn-readonly {
            border-color: var(--orange);
            color: var(--orange);
            font-weight: 800;
        }

        .btn-readonly:hover {
            background: var(--orange);
            color: #fff;
            box-shadow: 4px 4px 0px var(--orange);
        }

        .btn-readonly.active {
            background: var(--orange);
            color: #fff;
            box-shadow: inset 0 0 0 2px #fff;
            animation: readonlyBlink 1s infinite alternate;
        }

        @keyframes readonlyBlink {
            from { opacity: 0.9; }
            to { opacity: 1; }
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        /* åªè¯»æŒ‡ç¤ºå™¨ */
        .readonly-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--orange);
            color: #fff;
            padding: 10px 20px;
            font-family: 'Archivo Black', sans-serif;
            font-size: 1rem;
            transform: translateY(-100px) translateZ(0);
            transition: transform var(--transition-normal);
            z-index: 1000;
            box-shadow: 4px 4px 0px #000;
            /* æ— éšœç¢ï¼šé€‚å½“çš„å­—ä½“å¤§å° */
            letter-spacing: 0.5px;
        }

        .readonly-indicator.show {
            transform: translateY(0) translateZ(0);
        }

        /* ============================================
           æ—¥å†åŒºåŸŸä¼˜åŒ–
           ============================================ */

        .calendar-area {
            padding: 20px;
            background: var(--bg-paper);
            position: relative;
            z-index: 2;
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
        }

        #capture-target {
            background: var(--bg-paper);
            padding: 10px;
            border: var(--border-thick) solid var(--ink);
            transition: filter var(--transition-normal);
        }

        #capture-target.readonly {
            filter: brightness(0.95);
        }

        /* æ—¥å†è¡¨å¤´ */
        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            border-bottom: var(--border-thick) solid var(--ink);
            background: var(--ink);
            gap: 2px;
            margin-bottom: 2px;
        }

        .weekday {
            background: var(--bg-paper);
            padding: 10px 0;
            text-align: center;
            font-weight: 800;
            font-size: 0.8rem;
            /* æ— éšœç¢ï¼šå­—ä½“ä¼˜åŒ– */
            letter-spacing: 1px;
        }

        /* æ—¥å†ç½‘æ ¼ */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: var(--ink);
            border-bottom: 2px solid var(--ink);
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
        }

        /* ============================================
           æ—¥æœŸæ ¼å­ä¼˜åŒ–ï¼ˆæ ¸å¿ƒäº¤äº’å…ƒç´ ï¼‰
           ============================================ */

        .day-cell {
            background: var(--bg-paper);
            aspect-ratio: 1 / 0.8;
            position: relative;
            cursor: crosshair;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 6px;
            user-select: none;
            /* å…³é”®ä¼˜åŒ–ï¼šä½¿ç”¨ will-change é¢„å‘Šå³å°†çš„å˜åŒ– */
            will-change: background-color, transform;
            transition: all var(--transition-fast);
            /* GPU åŠ é€Ÿ */
            transform: translateZ(0);
            /* è§¦æ‘¸ä¼˜åŒ– */
            touch-action: manipulation;
        }

        /* è§†è§‰åé¦ˆï¼šæ‚¬åœæ•ˆæœ */
        .day-cell:hover:not(.disabled):not(.empty-cell) {
            box-shadow: 0 0 0 2px rgba(0,0,0,0.2), inset 0 0 5px rgba(0,0,0,0.1);
            transform: scale(1.02) translateZ(0);
        }

        /* æŒ‰ä¸‹åé¦ˆ */
        .day-cell:active:not(.disabled):not(.empty-cell) {
            transform: scale(0.98) translateZ(0);
        }

        .day-cell.disabled {
            cursor: not-allowed;
            filter: grayscale(0.3);
            pointer-events: none;
            opacity: 0.6;
        }

        .date-num {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.2rem;
            opacity: 0.4;
            line-height: 1;
            pointer-events: none;
            font-variant-numeric: tabular-nums;
        }

        .shift-mark {
            font-size: 0.7rem;
            font-weight: 700;
            text-align: right;
            text-transform: uppercase;
            pointer-events: none;
            padding: 2px 4px;
            border: 1px solid transparent;
            transition: all var(--transition-fast);
            letter-spacing: 0.5px;
        }

        /* çŠ¶æ€æ ·å¼ - ä½¿ç”¨é«˜å¯¹æ¯”åº¦ */
        .day-cell.status-day {
            background: var(--blue);
            color: #fff;
            background-image: repeating-linear-gradient(
                45deg,
                rgba(255,255,255,0.1) 0px,
                rgba(255,255,255,0.1) 2px,
                transparent 2px,
                transparent 10px
            );
        }

        .day-cell.status-day .shift-mark {
            background: #fff;
            color: var(--blue);
        }

        .day-cell.status-night {
            background: var(--yellow);
            color: #000;
        }

        .day-cell.status-night .shift-mark {
            background: #000;
            color: var(--yellow);
        }

        .day-cell.status-off {
            background: var(--red);
            color: #fff;
            background-image: linear-gradient(
                135deg,
                #000 25%,
                transparent 25%
            ), linear-gradient(
                225deg,
                #000 25%,
                transparent 25%
            ), linear-gradient(
                45deg,
                #000 25%,
                transparent 25%
            ), linear-gradient(
                315deg,
                #000 25%,
                transparent 25%
            );
            background-position: 10px 0, 10px 0, 0 0, 0 0;
            background-size: 20px 20px;
            background-repeat: repeat;
            opacity: 0.9;
        }

        .day-cell.status-off .shift-mark {
            background: #000;
            color: #fff;
        }

        /* ä»Šå¤©é«˜äº® */
        .day-cell.is-today {
            box-shadow: inset 0 0 0 4px var(--ink) !important;
            z-index: 5;
            animation: todayPulse 2s ease-in-out infinite;
        }

        @keyframes todayPulse {
            0%, 100% {
                box-shadow: inset 0 0 0 4px var(--ink);
            }
            50% {
                box-shadow: inset 0 0 0 4px var(--ink), 0 0 8px rgba(0,0,0,0.3);
            }
        }

        .day-cell.is-today::before {
            content: "NOW";
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.6rem;
            background: var(--ink);
            color: #fff;
            padding: 0 2px;
            animation: nowPulse 1s ease-in-out infinite;
        }

        @keyframes nowPulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .empty-cell {
            background: #dcdad0;
            pointer-events: none;
        }

        /* ============================================
           Footer ä¼˜åŒ–
           ============================================ */

        footer {
            margin-top: auto;
            padding: 20px;
            border-top: var(--border-thick) solid var(--ink);
            text-align: center;
            font-size: 0.7rem;
            opacity: 0.5;
            background: var(--bg-paper);
            /* æ— éšœç¢ï¼šå­—ä½“ä¼˜åŒ– */
            letter-spacing: 0.5px;
        }

        /* ============================================
           å“åº”å¼ä¼˜åŒ–
           ============================================ */

        @media (max-width: 768px) {
            .tool-deck {
                flex-direction: column;
                align-items: stretch;
                gap: 20px;
            }

            .month-ctrl {
                justify-content: space-between;
            }

            .tool-selector {
                justify-content: space-between;
            }

            .tool-btn {
                flex: 1;
                height: 50px;
            }

            .day-cell {
                aspect-ratio: 1/1;
                padding: 4px;
                font-size: 0.75rem;
            }

            .date-num {
                font-size: 0.9rem;
            }

            .shift-mark {
                font-size: 0.6rem;
            }

            .weekday {
                padding: 8px 0;
                font-size: 0.65rem;
            }

            .calendar-header {
                gap: 1px;
            }

            .calendar-grid {
                gap: 1px;
            }

            h1 {
                font-size: 2rem;
            }

            .readonly-indicator {
                top: auto;
                bottom: 10px;
                font-size: 0.8rem;
                padding: 8px 15px;
            }
        }

        /* ============================================
           3ï¸âƒ£  æ— éšœç¢ä¼˜åŒ–
           ============================================ */

        /* ç„¦ç‚¹å¯è§ - WCAG AA æ ‡å‡† */
        .btn:focus-visible,
        .tool-btn:focus-visible,
        .day-cell:focus-visible {
            outline: 3px solid var(--blue);
            outline-offset: 2px;
        }

        /* å‡å°‘åŠ¨ç”»æ¨¡å¼ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }

            .crt-overlay {
                display: none;
            }
        }

        /* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
        @media (prefers-contrast: more) {
            :root {
                --bg-paper: #FFFFFF;
                --shadow-hard: 8px;
            }

            body {
                background-color: #FFFFFF;
            }

            .stat-box {
                border: 2px solid var(--ink);
            }

            .day-cell {
                border: 1px solid rgba(0,0,0,0.3);
            }
        }

        /* æ·±è‰²æ¨¡å¼æ”¯æŒ */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-paper: #1a1a1a;
                --bg-dark: #FFFFFF;
                --ink: #FFFFFF;
            }

            body {
                background-color: #1a1a1a;
                color: #FFFFFF;
            }

            header {
                background: #FFFFFF;
                color: #1a1a1a;
            }
        }

        /* ============================================
           æ€§èƒ½ä¼˜åŒ–ï¼šå…³é”® CSS
           ============================================ */

        /* é¿å…å¸ƒå±€æŠ–åŠ¨ */
        input[type="file"] {
            display: none;
        }

        /* ä¼˜åŒ–æ–‡æœ¬é€‰æ‹© */
        ::selection {
            background: var(--blue);
            color: #fff;
        }

        /* ç§»åŠ¨è®¾å¤‡ä¼˜åŒ– */
        @supports (padding: max(0px)) {
            .container {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }

            footer {
                padding-bottom: max(20px, env(safe-area-inset-bottom));
            }
        }

        /* æ‰“å°ä¼˜åŒ– */
        @media print {
            .tool-deck, header .meta-info, .crt-overlay, .readonly-indicator {
                display: none;
            }

            #capture-target {
                border: none;
                box-shadow: none;
            }
        }
    </style>
</head>
<body>

    <div class="crt-overlay"></div>

    <!-- åªè¯»çŠ¶æ€æŒ‡ç¤ºå™¨ -->
    <div class="readonly-indicator" id="readonlyIndicator" role="status" aria-live="polite">
        ğŸ”’ READ ONLY MODE
    </div>

    <div class="container">
        <!-- åªè¯»æ¨¡å¼é®ç½©å±‚ -->
        <div class="readonly-overlay" id="readonlyOverlay"></div>

        <header role="banner">
            <div style="display:flex; align-items:baseline; gap:10px;">
                <h1>Shift_Mgr_V2</h1>
                <span style="background:var(--bg-paper); color:var(--ink); padding:2px 6px; font-weight:bold; font-size:0.8rem;">BETA</span>
                <span id="readonlyBadge" style="display:none; background:var(--orange); color:#fff; padding:2px 6px; font-weight:bold; font-size:0.8rem;" aria-label="Read only mode enabled">LOCKED</span>
            </div>
            <div class="meta-info">
                <span>// INDUSTRIAL STANDARD</span>
                <span id="systemTime" aria-live="polite" aria-label="System time">SYS_TIME: --:--:--</span>
            </div>
        </header>

        <div class="dashboard" role="region" aria-label="Statistics dashboard">
            <div class="stat-box stat-day">
                <span class="stat-label">Day Shifts (ç™½ç­)</span>
                <span class="stat-value" id="countDay" aria-label="Day shifts count">0</span>
            </div>
            <div class="stat-box stat-night">
                <span class="stat-label">Night Shifts (æ™šç­)</span>
                <span class="stat-value" id="countNight" aria-label="Night shifts count">0</span>
            </div>
            <div class="stat-box stat-off">
                <span class="stat-label">Off Duty (ä¼‘æ¯)</span>
                <span class="stat-value" id="countOff" aria-label="Off duty count">0</span>
            </div>
            <div class="stat-box" style="background: var(--ink); color: var(--bg-paper);">
                <span class="stat-label" style="color:#888;">Total (åˆè®¡)</span>
                <span class="stat-value" id="countTotal" aria-label="Total shifts">0</span>
            </div>
        </div>

        <div class="tool-deck" role="toolbar" aria-label="Main toolbar">
            <div class="month-ctrl">
                <button class="btn" id="prevMonth" aria-label="Previous month">PREV</button>
                <div class="month-label" id="monthLabel" aria-live="polite">OCT 23</div>
                <button class="btn" id="nextMonth" aria-label="Next month">NEXT</button>
            </div>

            <div style="display: flex; flex-direction: column; gap: 5px;">
                <label class="stat-label" for="toolSelector">MODE SELECTOR</label>
                <div class="tool-selector" id="toolSelector" role="group" aria-label="Drawing tools">
                    <button class="tool-btn active" data-tool="cursor" title="Toggle painting mode or select mode" aria-pressed="true" aria-label="Cursor/Select tool">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path></svg>
                    </button>
                    <button class="tool-btn" data-tool="day" title="Paint Day Shift" aria-pressed="false" aria-label="Day shift tool (D)">D</button>
                    <button class="tool-btn" data-tool="night" title="Paint Night Shift" aria-pressed="false" aria-label="Night shift tool (N)">N</button>
                    <button class="tool-btn" data-tool="off" title="Paint Off" aria-pressed="false" aria-label="Off duty tool (O)">O</button>
                    <button class="tool-btn" data-tool="erase" title="Eraser" aria-pressed="false" aria-label="Eraser tool (X)">X</button>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-readonly" id="btnReadonly" title="Toggle Read-Only Mode" aria-pressed="false">READONLY</button>
                <button class="btn" id="btnExportImg" style="color: var(--blue); border-color: var(--blue);" aria-label="Export calendar as image">SAVE IMG</button>
                <button class="btn" id="btnExportJson" aria-label="Export data as JSON. Right-click to import">DATA</button>
                <button class="btn" id="btnClear" style="color: var(--red); border-color: var(--red);" aria-label="Clear all shift data">CLR</button>
                <input type="file" id="fileInput" hidden accept=".json" aria-label="Import data file">
            </div>
        </div>

        <div class="calendar-area" role="main">
            <div id="capture-target">
                <div id="print-header" style="display:none; border-bottom: 2px solid #000; margin-bottom: 10px; padding-bottom: 5px;">
                    <h2 style="margin:0; font-family:'Archivo Black'">SHIFT SCHEDULE</h2>
                    <div id="print-month" style="font-family:'JetBrains Mono'"></div>
                </div>

                <div class="calendar-header" role="row">
                    <div class="weekday" role="columnheader">SUN</div>
                    <div class="weekday" role="columnheader">MON</div>
                    <div class="weekday" role="columnheader">TUE</div>
                    <div class="weekday" role="columnheader">WED</div>
                    <div class="weekday" role="columnheader">THU</div>
                    <div class="weekday" role="columnheader">FRI</div>
                    <div class="weekday" role="columnheader">SAT</div>
                </div>
                <div class="calendar-grid" id="calendarGrid" role="grid">
                </div>

                <div style="margin-top: 10px; font-size: 0.6rem; text-align: right; opacity: 0.6; display: none;" id="print-footer">
                    GENERATED BY IND_SHIFT_MGR
                </div>
            </div>
        </div>

        <footer role="contentinfo">
            SYSTEM STATUS: ONLINE // RENDER: DOM // NO DATA SENT TO SERVER
        </footer>
    </div>

    <script>
        /**
         * ============================================
         * æ€§èƒ½ä¼˜åŒ–çš„æ•°æ®ç®¡ç†å’Œäº¤äº’è„šæœ¬
         * ============================================
         */

        // æ€§èƒ½ç›‘æ§ï¼ˆå¯é€‰ï¼Œç”¨äºå¼€å‘è°ƒè¯•ï¼‰
        const PERF = {
            startTime: performance.now(),
            log: (msg) => {
                if (localStorage.getItem('debug_perf')) {
                    console.log(`[PERF] ${msg} - ${(performance.now() - PERF.startTime).toFixed(2)}ms`);
                }
            }
        };

        // --- é…ç½®ä¸çŠ¶æ€ ---
        const CONFIG = {
            storageKey: 'ind_shift_v2_data',
            readonlyKey: 'ind_shift_v2_readonly',
            colors: { day: '#0033CC', night: '#FFCC00', off: '#FF3300', none: '#E6E4D8' }
        };

        const STATE = {
            currentDate: new Date(),
            data: JSON.parse(localStorage.getItem(CONFIG.storageKey)) || {},
            tool: 'cursor',
            isDragging: false,
            readonly: localStorage.getItem(CONFIG.readonlyKey) === 'true',
            /* æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨ Map å­˜å‚¨çŠ¶æ€å˜åŒ– */
            pendingUpdates: new Map()
        };

        // --- DOM å…ƒç´ ç¼“å­˜ ---
        const els = {
            grid: document.getElementById('calendarGrid'),
            monthLabel: document.getElementById('monthLabel'),
            tools: document.querySelectorAll('.tool-btn'),
            stats: {
                day: document.getElementById('countDay'),
                night: document.getElementById('countNight'),
                off: document.getElementById('countOff'),
                total: document.getElementById('countTotal')
            },
            sysTime: document.getElementById('systemTime'),
            btnReadonly: document.getElementById('btnReadonly'),
            toolSelector: document.getElementById('toolSelector'),
            readonlyOverlay: document.getElementById('readonlyOverlay'),
            readonlyIndicator: document.getElementById('readonlyIndicator'),
            readonlyBadge: document.getElementById('readonlyBadge'),
            captureTarget: document.getElementById('capture-target'),
            btnClear: document.getElementById('btnClear'),
            container: document.querySelector('.container')
        };

        PERF.log('DOM elements cached');

        // --- é˜²æŠ–/èŠ‚æµå·¥å…· ---
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }

        // --- åˆå§‹åŒ– ---
        function init() {
            renderCalendar();
            updateStats();
            startClock();

            if (STATE.readonly) {
                toggleReadonly(true);
            }

            attachEventListeners();
            
            // è¿›åœºåŠ¨ç”»ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
            if (window.gsap) {
                gsap.from(els.container, {
                    y: 20,
                    opacity: 0,
                    duration: 0.6,
                    ease: "power3.out"
                });
            }

            PERF.log('Initialization complete');
        }

        function attachEventListeners() {
            // æœˆä»½å¯¼èˆª
            document.getElementById('prevMonth').addEventListener('click', () => changeMonth(-1));
            document.getElementById('nextMonth').addEventListener('click', () => changeMonth(1));

            // å¯¼å‡º/å¯¼å…¥
            document.getElementById('btnExportJson').addEventListener('click', exportJson);
            document.getElementById('btnExportImg').addEventListener('click', exportImage);
            document.getElementById('btnClear').addEventListener('click', clearData);

            // å³é”®å¯¼å…¥
            document.getElementById('btnExportJson').addEventListener('contextmenu', (e) => {
                e.preventDefault();
                if (!STATE.readonly) {
                    document.getElementById('fileInput').click();
                }
            });
            document.getElementById('fileInput').addEventListener('change', importJson);

            // åªè¯»æ¨¡å¼
            els.btnReadonly.addEventListener('click', () => {
                toggleReadonly(!STATE.readonly);
                localStorage.setItem(CONFIG.readonlyKey, STATE.readonly);
            });

            // å·¥å…·é€‰æ‹© - ä½¿ç”¨äº‹ä»¶å§”æ‰˜ä¼˜åŒ–æ€§èƒ½
            els.tools.forEach(btn => {
                btn.addEventListener('click', handleToolSelect);
            });

            // é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', handleKeyboardShortcut);

            PERF.log('Event listeners attached');
        }

        function handleToolSelect(e) {
            if (STATE.readonly) return;

            const target = e.currentTarget;
            const tool = target.dataset.tool;

            // æ›´æ–° UI çŠ¶æ€
            els.tools.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-pressed', 'false');
            });
            target.classList.add('active');
            target.setAttribute('aria-pressed', 'true');
            STATE.tool = tool;

            // æ€§èƒ½ä¼˜åŒ–çš„åŠ¨ç”»
            if (window.gsap) {
                gsap.fromTo(target, 
                    { scale: 0.8 }, 
                    { scale: 1, duration: 0.2, ease: "back.out(1.7)" }
                );
            }
        }

        function handleKeyboardShortcut(e) {
            if (STATE.readonly) return;

            const toolMap = {
                'd': 'day',
                'n': 'night',
                'o': 'off',
                'x': 'erase'
            };

            const tool = toolMap[e.key.toLowerCase()];
            if (tool) {
                const btn = document.querySelector(`.tool-btn[data-tool="${tool}"]`);
                if (btn) btn.click();
            }
        }

        // --- åªè¯»æ¨¡å¼ ---
        function toggleReadonly(force = null) {
            STATE.readonly = force !== null ? force : !STATE.readonly;

            if (STATE.readonly) {
                // æ¿€æ´»åªè¯»
                els.btnReadonly.classList.add('active');
                els.btnReadonly.setAttribute('aria-pressed', 'true');
                els.btnReadonly.innerHTML = 'ğŸ”’ UNLOCK';
                els.toolSelector.classList.add('disabled');
                els.readonlyOverlay.classList.add('active');
                els.readonlyIndicator.classList.add('show');
                els.readonlyBadge.style.display = 'inline-block';
                els.captureTarget.classList.add('readonly');
                els.btnClear.disabled = true;

                // ç¦ç”¨æ—¥å†æ ¼å­
                document.querySelectorAll('.day-cell').forEach(cell => {
                    cell.classList.add('disabled');
                    cell.setAttribute('aria-disabled', 'true');
                });

                showNotification('READ ONLY MODE ENABLED', 'warning');
            } else {
                // é€€å‡ºåªè¯»
                els.btnReadonly.classList.remove('active');
                els.btnReadonly.setAttribute('aria-pressed', 'false');
                els.btnReadonly.innerHTML = 'READONLY';
                els.toolSelector.classList.remove('disabled');
                els.readonlyOverlay.classList.remove('active');
                els.readonlyIndicator.classList.remove('show');
                els.readonlyBadge.style.display = 'none';
                els.captureTarget.classList.remove('readonly');
                els.btnClear.disabled = false;

                // å¯ç”¨æ—¥å†æ ¼å­
                document.querySelectorAll('.day-cell').forEach(cell => {
                    if (!cell.classList.contains('empty-cell')) {
                        cell.classList.remove('disabled');
                        cell.setAttribute('aria-disabled', 'false');
                    }
                });

                showNotification('EDIT MODE ENABLED', 'success');
            }
        }

        // --- æ ¸å¿ƒé€»è¾‘ ---

        function changeMonth(delta) {
            STATE.currentDate.setMonth(STATE.currentDate.getMonth() + delta);
            renderCalendar();
            updateStats();
        }

        function saveData() {
            if (STATE.readonly) return;
            // ä½¿ç”¨ requestIdleCallback è¿›è¡Œåå°ä¿å­˜ï¼ˆå¦‚æœæ”¯æŒï¼‰
            if (window.requestIdleCallback) {
                requestIdleCallback(() => {
                    localStorage.setItem(CONFIG.storageKey, JSON.stringify(STATE.data));
                });
            } else {
                localStorage.setItem(CONFIG.storageKey, JSON.stringify(STATE.data));
            }
        }

        function getShift(dateStr) {
            return STATE.data[dateStr] || 'none';
        }

        function setShift(dateStr, type) {
            if (STATE.readonly) return;

            if (type === 'none') {
                delete STATE.data[dateStr];
            } else {
                STATE.data[dateStr] = type;
            }

            // æ‰¹é‡æ›´æ–°ï¼šå»¶è¿Ÿä¿å­˜
            clearTimeout(STATE.saveTimeout);
            STATE.saveTimeout = setTimeout(saveData, 500);

            // å±€éƒ¨ DOM æ›´æ–°
            const cell = document.querySelector(`.day-cell[data-date="${dateStr}"]`);
            if (cell) updateCellVisual(cell, type);
        }

        function handleInteraction(dateStr) {
            if (STATE.readonly) {
                // åªè¯»åé¦ˆ
                els.readonlyIndicator.style.animation = 'none';
                setTimeout(() => {
                    els.readonlyIndicator.style.animation = '';
                }, 10);
                return;
            }

            const current = getShift(dateStr);
            let next = 'none';

            if (STATE.tool === 'cursor') {
                const cycle = ['none', 'day', 'night', 'off'];
                const idx = cycle.indexOf(current);
                next = cycle[(idx + 1) % cycle.length];
            } else if (STATE.tool === 'erase') {
                next = 'none';
            } else {
                next = STATE.tool;
            }

            if (current !== next) {
                setShift(dateStr, next);
            }
        }

        // --- æ¸²æŸ“é€»è¾‘ ---

        function renderCalendar() {
            const year = STATE.currentDate.getFullYear();
            const month = STATE.currentDate.getMonth();

            els.monthLabel.innerText = STATE.currentDate.toLocaleString('en-US', {
                month: 'short',
                year: '2-digit'
            }).toUpperCase();

            const firstDay = new Date(year, month, 1);
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const startDay = firstDay.getDay();

            // ä½¿ç”¨ DocumentFragment ä¼˜åŒ–æ‰¹é‡ DOM æ’å…¥
            const fragment = document.createDocumentFragment();

            // å¡«å……ç©ºç™½
            for (let i = 0; i < startDay; i++) {
                const div = document.createElement('div');
                div.className = 'day-cell empty-cell';
                fragment.appendChild(div);
            }

            const today = new Date();
            const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;

            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const cell = document.createElement('div');
                cell.className = 'day-cell';
                cell.dataset.date = dateStr;

                if (STATE.readonly) {
                    cell.classList.add('disabled');
                    cell.setAttribute('aria-disabled', 'true');
                }

                if (isCurrentMonth && day === today.getDate()) {
                    cell.classList.add('is-today');
                }

                const num = document.createElement('div');
                num.className = 'date-num';
                num.innerText = day;

                const mark = document.createElement('div');
                mark.className = 'shift-mark';

                cell.appendChild(num);
                cell.appendChild(mark);

                updateCellVisual(cell, getShift(dateStr));

                // äº‹ä»¶å§”æ‰˜ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
                cell.addEventListener('mousedown', () => handleInteraction(dateStr));
                cell.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    handleInteraction(dateStr);
                }, { passive: false });

                fragment.appendChild(cell);
            }

            // ä¸€æ¬¡æ€§æ‰¹é‡æ’å…¥ DOM
            els.grid.innerHTML = '';
            els.grid.appendChild(fragment);

            PERF.log('Calendar rendered');
        }

        function updateCellVisual(cell, type) {
            cell.classList.remove('status-day', 'status-night', 'status-off');
            const mark = cell.querySelector('.shift-mark');

            if (type !== 'none') {
                cell.classList.add(`status-${type}`);
                mark.innerText = type === 'day' ? 'DAY' : (type === 'night' ? 'NGT' : 'OFF');
            } else {
                mark.innerText = '';
            }
        }

        // --- ç»Ÿè®¡ä¼˜åŒ– ---

        function updateStats() {
            const year = STATE.currentDate.getFullYear();
            const month = STATE.currentDate.getMonth() + 1;
            const prefix = `${year}-${String(month).padStart(2, '0')}`;

            let counts = { day: 0, night: 0, off: 0 };

            // ä¼˜åŒ–ï¼šåªéå†å½“æœˆæ•°æ®
            Object.entries(STATE.data).forEach(([date, type]) => {
                if (date.startsWith(prefix) && counts[type] !== undefined) {
                    counts[type]++;
                }
            });

            animateValue(els.stats.day, counts.day);
            animateValue(els.stats.night, counts.night);
            animateValue(els.stats.off, counts.off);
            animateValue(els.stats.total, counts.day + counts.night);
        }

        function animateValue(element, end) {
            const start = parseInt(element.innerText);
            if (start === end) return;

            if (window.gsap) {
                gsap.to(element, {
                    innerText: end,
                    duration: 0.4,
                    snap: { innerText: 1 },
                    ease: "power1.out"
                });
            } else {
                element.innerText = end;
            }
        }

        // --- æ—¶é’Ÿ ---

        function startClock() {
            const updateTime = () => {
                const now = new Date();
                els.sysTime.innerText = `SYS_TIME: ${now.toLocaleTimeString('en-GB')}`;
            };

            updateTime();
            // ä½¿ç”¨èŠ‚æµå‡å°‘æ›´æ–°é¢‘ç‡
            setInterval(updateTime, 1000);
        }

        // --- å¯¼å‡º/å¯¼å…¥ ---

        function exportJson() {
            const str = JSON.stringify(STATE.data, null, 2);
            const blob = new Blob([str], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `shift_data_${new Date().toISOString().slice(0, 10)}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function importJson(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (evt) => {
                try {
                    const newData = JSON.parse(evt.target.result);
                    if (confirm("Overwrite current data?")) {
                        STATE.data = newData;
                        saveData();
                        renderCalendar();
                        updateStats();
                        showNotification('Data imported successfully', 'success');
                    }
                } catch (err) {
                    showNotification('Invalid JSON file', 'error');
                }
            };
            reader.readAsText(file);
        }

        function clearData() {
            if (STATE.readonly) {
                showNotification('Cannot clear data in read-only mode', 'error');
                return;
            }

            if (confirm("FACTORY RESET: DELETE ALL SHIFT DATA?")) {
                STATE.data = {};
                saveData();
                renderCalendar();
                updateStats();
                showNotification('Data cleared', 'success');
            }
        }

        function exportImage() {
            if (!window.html2canvas) {
                showNotification('Export feature not available', 'error');
                return;
            }

            const target = document.getElementById('capture-target');
            const printHeader = document.getElementById('print-header');
            const printFooter = document.getElementById('print-footer');
            const printMonth = document.getElementById('print-month');

            printHeader.style.display = 'block';
            printFooter.style.display = 'block';
            printMonth.innerText = els.monthLabel.innerText;
            target.style.width = "800px";

            const overlayActive = els.readonlyOverlay.classList.contains('active');
            if (overlayActive) {
                els.readonlyOverlay.classList.remove('active');
            }

            const btn = document.getElementById('btnExportImg');
            const originalText = btn.innerText;
            btn.innerText = "RENDERING...";
            btn.disabled = true;

            html2canvas(target, {
                scale: 2,
                backgroundColor: "#E6E4D8",
                logging: false,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Schedule_${els.monthLabel.innerText}.png`;
                link.href = canvas.toDataURL();
                link.click();
                showNotification('Image exported', 'success');
            }).catch(() => {
                showNotification('Export failed', 'error');
            }).finally(() => {
                printHeader.style.display = 'none';
                printFooter.style.display = 'none';
                target.style.width = "";
                btn.innerText = originalText;
                btn.disabled = false;

                if (overlayActive) {
                    els.readonlyOverlay.classList.add('active');
                }
            });
        }

        // --- é€šçŸ¥ç³»ç»Ÿ ---

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const bgColor = {
                warning: 'var(--orange)',
                error: 'var(--red)',
                success: 'var(--green)',
                info: 'var(--blue)'
            }[type];

            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) translateZ(0);
                background: ${bgColor};
                color: #fff;
                padding: 15px 30px;
                font-family: 'Archivo Black', sans-serif;
                font-size: 1.2rem;
                z-index: 10000;
                box-shadow: 0 0 0 5px rgba(0,0,0,0.3);
                letter-spacing: 0.5px;
                animation: notificationPulse 0.5s ease-out;
            `;
            notification.setAttribute('role', 'status');
            notification.setAttribute('aria-live', 'polite');
            notification.innerText = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // æ·»åŠ åŠ¨ç”»æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            @keyframes notificationPulse {
                0% { transform: translate(-50%, -50%) scale(0.8) translateZ(0); opacity: 0; }
                50% { transform: translate(-50%, -50%) scale(1.1) translateZ(0); }
                100% { transform: translate(-50%, -50%) scale(1) translateZ(0); opacity: 1; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        PERF.log('Notification system initialized');

        // å¯åŠ¨åº”ç”¨
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

    </script>
</body>
</html>